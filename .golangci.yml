run:
  timeout: 5m
  modules-download-mode: readonly

issues:
  # Enable all checks (which was as default disabled e.g. comments).
  exclude-use-default: false
  exclude-rules:
    # Documenting comments are not required except on packages.
    - linters:
        - revive
      text: exported (function|method|type) .*? should have comment or be unexported
    - linters:
        - revive
      text: exported (const|var) .*? should have comment (\(or a comment on this block\) )?or be unexported
    - linters:
        - revive
      text: "if-return: redundant if ...; err != nil check, just return error instead."
  # Value 0 means show all.
  max-issues-per-linter: 0
  max-same-issues: 0

linters-settings:
  goimports:
    # Put imports beginning with prefix after 3rd-party packages;
    # it's a comma-separated list of prefixes.
    local-prefixes: github.com/nobl9/nobl9-go
  govet:
    # False positives and reporting on error shadowing (which is intended).
    # Quoting Robi Pike:
    #   The shadow code is marked experimental.
    #   It has too many false positives to be enabled by default, so this is not entirely unexpected,
    #   but don't expect a fix soon. The right way to detect shadowing without flow analysis is elusive.
    # Few years later (comment from 2015) and the Shadow analyer is still experimental...
    check-shadowing: false
  lll:
    line-length: 120
  gocritic:
    enabled-tags:
      # - diagnostic
      - opinionated
      # - style
  exhaustive:
    # In switch statement treat label default: as being exhaustive.
    default-signifies-exhaustive: true
  misspell:
    locale: US

linters:
  # Please, do not use `enable-all`: it's deprecated and will be removed soon.
  # inverted configuration with `enable-all` and `disable` is not scalable during updates of golangci-lint.
  disable-all: true
  enable:
    # All linters from list https://golangci-lint.run/usage/linters/ are speciefed here and explicit enable/disable.
    - asciicheck
    - bodyclose
    # - cyclop # Nice! to considers
    # - deadcode # Deprecated. Replaced by 'unused'.
    - depguard
    - dogsled
    # - durationcheck # Nice! Enable in separate PR.
    - errcheck
    # - errorlint # Nice! To consider, enable in separate PR.
    - exhaustive
    # - exhaustivestruct # Should be used only in special cases, for N9 is useless.
    - exportloopref
    # - forbidigo # Nice! Not ready now.
    # - funlen # About optimal function length programmer and reviewer should decide.
    # - gci # Nice! Enable in separate PR.
    - gochecknoinits
    - gocognit
    - goconst
    - gocritic
    - gocyclo
    # - godot # Nice! Enable in separate PR.
    # - godox
    # - goerr113 # To consider.
    - gofmt
    # - gofumpt # Nice! Not ready now.
    - goheader
    - goimports
    # - golint # Deprecated and replaced by revive, since 1.40 golangci-lint.
    # - gomnd # Too aggressive, programmer and reviewer should decide what "magic numbers" is inappropriate in code.
    - goprintffuncname
    # - gosec # Commented out because it's used directly
    - gosimple
    - govet
    # - ifshort # Deprecated. No longer maintained.
    - importas
    - ineffassign
    - lll
    - makezero
    - misspell
    - nakedret
    # - nestif # Nice! Not ready now.
    - nilerr
    # - nlreturn # In some cases try to force redundant empty lines, which contradicts the style guide.
    # - noctx # Nice! not ready now
    # - nolintlint # To consider.
    # - paralleltest # To consider.
    - prealloc
    - predeclared
    - revive
    - rowserrcheck
    - sqlclosecheck
    - staticcheck
    # - structcheck # Deprecated. Replaced by 'unused'.
    - stylecheck
    # - testpackage # Forces separate _test packages. In N9 there're tests already which doesn't follow this.
    # - thelper # Force explicit marking of helper functions.
    - tparallel
    - typecheck
    - unconvert
    - unparam
    - unused
    - wastedassign
    - whitespace
    # - wrapcheck # Requires every error returned from third-party library to be wrapped.
    # - varcheck # Deprecated. Replaced by 'unused'.
    # - wsl # Try to force redundant empty lines in some cases, which contradicts the style guide.
